# Template Customization Guide

## Template Override System

Custom templates are stored in `.dt-templates/<preset>/` directory:

```
.dt-templates/
├── microservices/
│   ├── template.config.json
│   ├── module-readme.hbs
│   ├── api-contracts.hbs
│   └── ... (other templates)
└── monolith/
    └── ...
```

## Template Resolution Order

1. User templates: `.dt-templates/<preset>/<template>.hbs`
2. Built-in templates: `dist/templates/<preset>/<template>.hbs`

Override specific templates while keeping others as defaults.

## Handlebars Template Syntax

### Available Variables

```handlebars
{{module.id}}           <!-- kebab-case-id -->
{{module.name}}         <!-- Human Readable Name -->
{{module.description}}  <!-- Module description -->
{{module.platform}}     <!-- web-application -->
{{module.features}}     <!-- Array of feature names -->
{{module.services}}     <!-- Array of service names -->
{{module.databases}}    <!-- Array of database descriptions -->
{{module.kafkaTopics}}  <!-- Array of Kafka topics -->
{{module.websocketEvents}} <!-- Array of WebSocket events -->
{{module.awsServices}}  <!-- Array of AWS services -->

{{preset}}              <!-- Current preset name -->
{{projectName}}         <!-- Project name from config -->
```

### Built-in Helpers

```handlebars
{{capitalize module.id}}     <!-- Kebab Case Id -->
{{add @index 1}}             <!-- 1-based index -->
{{#eq value "test"}}...{{/eq}}
{{#ne value "test"}}...{{/ne}}
{{#gt value 5}}...{{/gt}}
{{#lt value 5}}...{{/lt}}
```

### Iteration

```handlebars
{{#each module.features}}
## Feature: {{this}}
{{/each}}

{{#each module.features as |feature index|}}
{{add index 1}}. {{feature}}
{{/each}}
```

### Conditionals

```handlebars
{{#if module.kafkaTopics}}
## Kafka Topics
{{#each module.kafkaTopics}}
- `{{this}}`
{{/each}}
{{/if}}

{{#unless module.services}}
No services defined.
{{/unless}}
```

## Example Custom Template

### Custom module-readme.hbs

```handlebars
# {{module.name}}

> {{module.description}}

## Platform
**{{module.platform}}**

## Features

{{#each module.features}}
- [ ] {{this}}
{{/each}}

## Technical Stack

{{#if module.databases}}
### Databases
{{#each module.databases}}
- {{this}}
{{/each}}
{{/if}}

{{#if module.services}}
### Services
{{#each module.services}}
- `{{this}}`
{{/each}}
{{/if}}

{{#if module.awsServices}}
### AWS Services
{{#each module.awsServices}}
- {{this}}
{{/each}}
{{/if}}

---
*Generated by dt-workspace*
```

## template.config.json Structure

```json
{
  "preset": "microservices",
  "description": "Preset description",
  "documentTypes": [
    {
      "name": "README.md",
      "template": "module-readme.hbs",
      "description": "Module overview"
    },
    {
      "name": "user-flows",
      "template": "user-flows-single.hbs",
      "indexTemplate": "user-flows-index.hbs",
      "description": "User journey scenarios",
      "splitBy": "features",
      "directory": true
    }
  ],
  "platformDocumentTypes": [
    {
      "name": "timeline.md",
      "template": "platform-timeline.hbs",
      "description": "Development timeline"
    }
  ],
  "featureTemplate": "feature-file.hbs",
  "mainReadmeTemplate": "main-readme.hbs"
}
```

## Creating Custom Presets

1. Create directory: `.dt-templates/my-preset/`
2. Create `template.config.json` with document types
3. Create `.hbs` templates for each document
4. Use with `--preset my-preset`

## Placeholder Conventions

Use consistent placeholders for AI completion:

```markdown
[To be documented]
[API endpoints to be documented]
[Schema to be documented here]
[Security requirements to be documented]
[Performance metrics to be documented]
```

Pattern: `[<context> to be documented]`
